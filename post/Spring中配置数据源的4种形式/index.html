<!DOCTYPE html>
<html>
  <head>
      
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>itme.ink</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<meta name="description" content="æ¸©æ•…è€ŒçŸ¥æ–°"/>
<meta name="keywords" content="æ¸©æ•…è€ŒçŸ¥æ–°"/>

<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
<link rel="shortcut icon" href="https://jike-leisong.github.io//favicon.ico">

<link rel="stylesheet" href="https://jike-leisong.github.io//styles/main.css">

<!-- Modernizr JS -->
<script src="https://jike-leisong.github.io//media/scripts/_vendors/modernizr-2.6.2.min.js"></script>
<!-- FOR IE9 below -->
<!--[if lt IE 9]>
<scripts src="https://jike-leisong.github.io//media/scripts/_vendors/respond.min.js"></scripts>
<![endif]-->

<!-- Comment -->


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/tomorrow-night.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
<link crossorigin="anonymous" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" href="https://lib.baomitu.com/font-awesome/5.8.1/css/all.min.css" rel="stylesheet">

  </head>
  <body>
  
<div id="fh5co-offcanvas">
    <a href="#!" class="fh5co-close-offcanvas js-fh5co-close-offcanvas">
        <span><i class="icon-cross3"></i> <span>Close</span></span>
    </a>
    <div class="fh5co-bio">
        <figure>
            <img src="https://jike-leisong.github.io//media/images/avatar.png" alt="itme.ink" class="img-responsive">
        </figure>
        <h3 class="heading">ABOUT ME</h3>
        <h2>itme.ink</h2>
        <p>æ¸©æ•…è€ŒçŸ¥æ–°</p>
        <ul class="fh5co-social">
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
        </ul>
    </div>

    <div class="fh5co-menu">
        <div class="fh5co-box">
            <h3 class="heading">æœç´¢</h3>
            <form action="#">
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="è¾“å…¥å…³é”®å­—">
                </div>
            </form>
        </div>
        <div class="fh5co-box">
            <h3 class="heading">æ ‡ç­¾</h3>
            <ul>
                
                    <li><a href="https://jike-leisong.github.io//tag/ZMreOtewG">MVC</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/2RK0lyPtw">DB</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/hJqNul-if">Spring Cloud</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/mian-shi-ti">é¢è¯•é¢˜</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/yYzItG4Us">è®¾è®¡æ¨¡å¼</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/2VvjfMCS1">æºç åˆ†æ</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/duo-xian-cheng">å¤šçº¿ç¨‹</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/xiao-xi">æ¶ˆæ¯</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/0WBzoU1G-">Mybatis</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/sOMy5ZlVw">åˆ†å¸ƒå¼</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/tool">Tool</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/suan-fa">ç®—æ³•</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/tomact">Tomact</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/linux">Linux</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/MzKEL8HsE">Spring</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/boot">Boot</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/JUSmlN723">Git</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/netty">Netty</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/kua-yu">è·¨åŸŸ</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/xing-neng-diao-you">æ€§èƒ½è°ƒä¼˜</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/java">Java</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/redis">Redis</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/shu-ju-ku">æ•°æ®åº“</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/lei-jia-zai">ç±»åŠ è½½</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/jia-gou">æ¶æ„</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/soa">SOA</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/zookeeper">Zookeeper</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/shu-ju-yuan">æ•°æ®æº</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/fen-bu-shi-shi-wu">åˆ†å¸ƒå¼äº‹åŠ¡</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/sql">SQL</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/mabatis">Mabatis</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/hashmap">HashMap</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/cloud">Cloud</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/huan-cun">ç¼“å­˜</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/session">Session</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/cron">Cron</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/mi-deng-xing">å¹‚ç­‰æ€§</a></li>
                
            </ul>
        </div>
    </div>
</div>

<header id="fh5co-header">
    <div class="container-fluid">
        <div class="row">
            <a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle"><i></i></a>
            <ul class="fh5co-social">
                
                    <li>
                        <a href="/"
                         >
                            é¦–é¡µ
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives"
                         >
                            å½’æ¡£
                        </a>
                    </li>
                
                    <li>
                        <a href="/tags"
                         >
                            æ ‡ç­¾
                        </a>
                    </li>
                
                    <li>
                        <a href="/post/about"
                         >
                            å…³äº
                        </a>
                    </li>
                
            </ul>
            <div class="col-lg-12 col-md-12 text-center">
                <h1 id="fh5co-logo">
                    <a href="https://jike-leisong.github.io/">itme.ink</a>
                </h1>
            </div>
        </div>
    </div>
</header>


<!--  <a href="#" class="fh5co-post-prev"><span>ğŸ‘ˆ Prev</span></a>-->
<!--  <a href="#" class="fh5co-post-next"><span>Next ğŸ‘‰</span></a>-->

  <div class="container-fluid">
      <div class="row fh5co-post-entry single-entry">
          <article class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2 col-xs-12 col-xs-offset-0">
              <figure class="animate-box">
                  
              </figure>
              <span class="fh5co-meta animate-box">
                  
                      <div class="tag-container">
                          
                              <a href="https://jike-leisong.github.io//tag/shu-ju-yuan" class="tag">æ•°æ®æº, </a>
                          
                              <a href="https://jike-leisong.github.io//tag/mian-shi-ti" class="tag">é¢è¯•é¢˜, </a>
                          
                      </div>
                  
              </span>
              <h2 class="fh5co-article-title animate-box">Springä¸­é…ç½®æ•°æ®æºçš„4ç§å½¢å¼</h2>
              <span class="fh5co-meta fh5co-date animate-box">2017-12-17</span>

              <div class="col-lg-12 col-lg-offset-0 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0 col-xs-12 col-xs-offset-0 text-left content-article">
                  <div class="row">
                      <div class="col-md-12 animate-box post-content">
                          <p> <p>ä¸ç®¡é‡‡ç”¨ä½•ç§æŒä¹…åŒ–æŠ€æœ¯ï¼Œéƒ½éœ€è¦å®šä¹‰æ•°æ®æºã€‚Springä¸­æä¾›äº†4ç§ä¸åŒå½¢å¼çš„æ•°æ®æºé…ç½®æ–¹å¼ï¼š
springè‡ªå¸¦çš„æ•°æ®æº(DriverManagerDataSource)ï¼ŒDBCPæ•°æ®æºï¼ŒC3P0æ•°æ®æº,JNDIæ•°æ®æºã€‚</p>
<p><strong>1.springè‡ªå¸¦çš„æ•°æ®æº</strong></p>
<p>DriverManagerDataSource
XMLä»£ç ï¼š</p>
<pre><code class="language-xml">&lt;bean id=&quot;dataSource&quot;     
      class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;     
    &lt;property name=&quot;driverClassName&quot; value=&quot;oracle.jdbc.driver.OracleDriver&quot; /&gt;  
    &lt;property name=&quot;url&quot; value=&quot;jdbc:oracle:thin:@172.19.34.6:1521:ORCL&quot; /&gt;  
    &lt;property name=&quot;username&quot; value=&quot;orclight&quot; /&gt;     
    &lt;property name=&quot;password&quot; value=&quot;123456&quot; /&gt;  
&lt;/bean&gt;  
</code></pre>
<p><strong>2.DBCPæ•°æ®æº</strong></p>
<p>DBCPçš„é…ç½®ä¾èµ–äº2ä¸ªjaråŒ…commons-dbcp.jarï¼Œcommons-pool.jarã€‚
XMLä»£ç :</p>
<pre><code class="language-xml">&lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot;         
        destroy-method=&quot;close&quot;&gt;         
    &lt;property name=&quot;driverClassName&quot; value=&quot;oracle.jdbc.driver.OracleDriver&quot; /&gt;  
    &lt;property name=&quot;url&quot; value=&quot;jdbc:oracle:thin:@172.19.34.6:1521:ORCL&quot; /&gt;  
    &lt;property name=&quot;username&quot; value=&quot;orclight&quot; /&gt;     
    &lt;property name=&quot;password&quot; value=&quot;123456&quot; /&gt;        
&lt;/bean&gt;   
</code></pre>
<p>ä¸Šé¢ä»£ç çš„è§£é‡Šï¼š
BasicDataSourceæä¾›äº†close()æ–¹æ³•å…³é—­æ•°æ®æºï¼Œæ‰€ä»¥å¿…é¡»è®¾å®šdestroy-method=â€closeâ€å±æ€§ï¼Œ ä»¥ä¾¿Springå®¹å™¨å…³é—­æ—¶ï¼Œæ•°æ®æºèƒ½å¤Ÿæ­£å¸¸å…³é—­ã€‚é™¤ä»¥ä¸Šå¿…é¡»çš„æ•°æ®æºå±æ€§å¤–ï¼Œè¿˜æœ‰ä¸€äº›å¸¸ç”¨çš„å±æ€§ï¼š</p>
<blockquote>
<p>defaultAutoCommitï¼šè®¾ç½®ä»æ•°æ®æºä¸­è¿”å›çš„è¿æ¥æ˜¯å¦é‡‡ç”¨è‡ªåŠ¨æäº¤æœºåˆ¶ï¼Œé»˜è®¤å€¼ä¸º trueï¼›
defaultReadOnlyï¼šè®¾ç½®æ•°æ®æºæ˜¯å¦ä»…èƒ½æ‰§è¡Œåªè¯»æ“ä½œï¼Œ é»˜è®¤å€¼ä¸º falseï¼›
maxActiveï¼šæœ€å¤§è¿æ¥æ•°æ®åº“è¿æ¥æ•°ï¼Œè®¾ç½®ä¸º0æ—¶ï¼Œè¡¨ç¤ºæ²¡æœ‰é™åˆ¶ï¼›
maxIdleï¼šæœ€å¤§ç­‰å¾…è¿æ¥ä¸­çš„æ•°é‡ï¼Œè®¾ç½®ä¸º0æ—¶ï¼Œè¡¨ç¤ºæ²¡æœ‰é™åˆ¶ï¼›
maxWaitï¼šæœ€å¤§ç­‰å¾…ç§’æ•°ï¼Œå•ä½ä¸ºæ¯«ç§’ï¼Œ è¶…è¿‡æ—¶é—´ä¼šæŠ¥å‡ºé”™è¯¯ä¿¡æ¯ï¼›
validationQueryï¼šç”¨äºéªŒè¯è¿æ¥æ˜¯å¦æˆåŠŸçš„æŸ¥è¯¢SQLè¯­å¥ï¼ŒSQLè¯­å¥å¿…é¡»è‡³å°‘è¦è¿”å›ä¸€è¡Œæ•°æ®ï¼Œ å¦‚ä½ å¯ä»¥ç®€å•åœ°è®¾ç½®ä¸ºï¼šâ€œselect count(*) from userâ€ï¼›
removeAbandonedï¼šæ˜¯å¦è‡ªæˆ‘ä¸­æ–­ï¼Œé»˜è®¤æ˜¯ false ï¼›
removeAbandonedTimeoutï¼šå‡ ç§’åæ•°æ®è¿æ¥ä¼šè‡ªåŠ¨æ–­å¼€ï¼Œåœ¨removeAbandonedä¸ºtrueï¼Œæä¾›è¯¥å€¼ï¼›
logAbandonedï¼šæ˜¯å¦è®°å½•ä¸­æ–­äº‹ä»¶ï¼Œ é»˜è®¤ä¸º falseï¼›</p>
</blockquote>
<p><strong>3.C3P0æ•°æ®æº</strong></p>
<p>C3P0æ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç çš„JDBCæ•°æ®æºå®ç°é¡¹ç›®ï¼ŒC3P0ä¾èµ–äºjaråŒ…c3p0.jarã€‚
XMLä»£ç ï¼š</p>
<pre><code class="language-xml">&lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;         
            destroy-method=&quot;close&quot;&gt;        
        &lt;property name=&quot;driverClass&quot; value=&quot; oracle.jdbc.driver.OracleDriver &quot;/&gt;        
        &lt;property name=&quot;jdbcUrl&quot; value=&quot;jdbc:oracle:thin:@172.19.34.6:1521:ORCL&quot;/&gt;        
        &lt;property name=&quot;user&quot; value=&quot;orclight&quot;/&gt;        
        &lt;property name=&quot;password&quot; value=&quot;123456&quot;/&gt;        
    &lt;/bean&gt;
</code></pre>
<p>ComboPooledDataSourceå’ŒBasicDataSourceä¸€æ ·æä¾›äº†ä¸€ä¸ªç”¨äºå…³é—­æ•°æ®æºçš„close()æ–¹æ³•ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä¿è¯Springå®¹å™¨å…³é—­æ—¶æ•°æ®æºèƒ½å¤ŸæˆåŠŸé‡Šæ”¾ã€‚
C3P0æ‹¥æœ‰æ¯”DBCPæ›´ä¸°å¯Œçš„é…ç½®å±æ€§ï¼Œé€šè¿‡è¿™äº›å±æ€§ï¼Œå¯ä»¥å¯¹æ•°æ®æºè¿›è¡Œå„ç§æœ‰æ•ˆçš„æ§åˆ¶ï¼š</p>
<blockquote>
<p>acquireIncrementï¼šå½“è¿æ¥æ± ä¸­çš„è¿æ¥ç”¨å®Œæ—¶ï¼ŒC3P0ä¸€æ¬¡æ€§åˆ›å»ºæ–°è¿æ¥çš„æ•°ç›®ï¼›
acquireRetryAttemptsï¼šå®šä¹‰åœ¨ä»æ•°æ®åº“è·å–æ–°è¿æ¥å¤±è´¥åé‡å¤å°è¯•è·å–çš„æ¬¡æ•°ï¼Œé»˜è®¤ä¸º30ï¼›
acquireRetryDelayï¼šä¸¤æ¬¡è¿æ¥ä¸­é—´éš”æ—¶é—´ï¼Œå•ä½æ¯«ç§’ï¼Œé»˜è®¤ä¸º1000ï¼›
autoCommitOnCloseï¼šè¿æ¥å…³é—­æ—¶é»˜è®¤å°†æ‰€æœ‰æœªæäº¤çš„æ“ä½œå›æ»šã€‚é»˜è®¤ä¸ºfalseï¼›
automaticTestTableï¼š C3P0å°†å»ºä¸€å¼ åä¸ºTestçš„ç©ºè¡¨ï¼Œå¹¶ä½¿ç”¨å…¶è‡ªå¸¦çš„æŸ¥è¯¢è¯­å¥è¿›è¡Œæµ‹è¯•ã€‚å¦‚æœå®šä¹‰äº†è¿™ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆå±æ€§preferredTestQueryå°†è¢«å¿½ç•¥ã€‚ä½  ä¸èƒ½åœ¨è¿™å¼ Testè¡¨ä¸Šè¿›è¡Œä»»ä½•æ“ä½œï¼Œå®ƒå°†ä¸­ä¸ºC3P0æµ‹è¯•æ‰€ç”¨ï¼Œé»˜è®¤ä¸ºnullï¼›
breakAfterAcquireFailureï¼šè·å–è¿æ¥å¤±è´¥å°†ä¼šå¼•èµ·æ‰€æœ‰ç­‰å¾…è·å–è¿æ¥çš„çº¿ç¨‹æŠ›å‡ºå¼‚å¸¸ã€‚ä½†æ˜¯æ•°æ®æºä»æœ‰æ•ˆä¿ç•™ï¼Œå¹¶åœ¨ä¸‹æ¬¡è°ƒ   ç”¨getConnection()çš„æ—¶å€™ç»§ç»­å°è¯•è·å–è¿æ¥ã€‚å¦‚æœè®¾ä¸ºtrueï¼Œé‚£ä¹ˆåœ¨å°è¯•è·å–è¿æ¥å¤±è´¥åè¯¥æ•°æ®æºå°†ç”³æ˜å·²æ–­å¼€å¹¶æ°¸ä¹…å…³é—­ã€‚é»˜è®¤ä¸º falseï¼›
checkoutTimeoutï¼šå½“è¿æ¥æ± ç”¨å®Œæ—¶å®¢æˆ·ç«¯è°ƒç”¨getConnection()åç­‰å¾…è·å–æ–°è¿æ¥çš„æ—¶é—´ï¼Œè¶…æ—¶åå°†æŠ›å‡ºSQLExceptionï¼Œå¦‚è®¾ä¸º0åˆ™æ— é™æœŸç­‰å¾…ã€‚å•ä½æ¯«ç§’ï¼Œé»˜è®¤ä¸º0ï¼›
connectionTesterClassNameï¼š é€šè¿‡å®ç°ConnectionTesteræˆ–QueryConnectionTesterçš„ç±»æ¥æµ‹è¯•è¿æ¥ï¼Œç±»åéœ€è®¾ç½®ä¸ºå…¨é™å®šåã€‚é»˜è®¤ä¸º com.mchange.v2.C3P0.impl.DefaultConnectionTesterï¼›
idleConnectionTestPeriodï¼šéš”å¤šå°‘ç§’æ£€æŸ¥æ‰€æœ‰è¿æ¥æ± ä¸­çš„ç©ºé—²è¿æ¥ï¼Œé»˜è®¤ä¸º0è¡¨ç¤ºä¸æ£€æŸ¥ï¼›
initialPoolSizeï¼šåˆå§‹åŒ–æ—¶åˆ›å»ºçš„è¿æ¥æ•°ï¼Œåº”åœ¨minPoolSizeä¸maxPoolSizeä¹‹é—´å–å€¼ã€‚é»˜è®¤ä¸º3ï¼›
maxIdleTimeï¼šæœ€å¤§ç©ºé—²æ—¶é—´ï¼Œè¶…è¿‡ç©ºé—²æ—¶é—´çš„è¿æ¥å°†è¢«ä¸¢å¼ƒã€‚ä¸º0æˆ–è´Ÿæ•°åˆ™æ°¸ä¸ä¸¢å¼ƒã€‚é»˜è®¤ä¸º0ï¼›
maxPoolSizeï¼šè¿æ¥æ± ä¸­ä¿ç•™çš„æœ€å¤§è¿æ¥æ•°ã€‚é»˜è®¤ä¸º15ï¼›
maxStatementsï¼šJDBCçš„æ ‡å‡†å‚æ•°ï¼Œç”¨ä»¥æ§åˆ¶æ•°æ®æºå†…åŠ è½½çš„PreparedStatementæ•°é‡ã€‚ä½†ç”±äºé¢„ç¼“å­˜çš„Statementå± äºå•ä¸ªConnectionè€Œä¸æ˜¯æ•´ä¸ªè¿æ¥æ± ã€‚æ‰€ä»¥è®¾ç½®è¿™ä¸ªå‚æ•°éœ€è¦è€ƒè™‘åˆ°å¤šæ–¹é¢çš„å› ç´ ï¼Œå¦‚æœmaxStatementsä¸ maxStatementsPerConnectionå‡ä¸º0ï¼Œåˆ™ç¼“å­˜è¢«å…³é—­ã€‚é»˜è®¤ä¸º0ï¼›
maxStatementsPerConnectionï¼šè¿æ¥æ± å†…å•ä¸ªè¿æ¥æ‰€æ‹¥æœ‰çš„æœ€å¤§ç¼“å­˜Statementæ•°ã€‚é»˜è®¤ä¸º0ï¼›
numHelperThreadsï¼šC3P0æ˜¯å¼‚æ­¥æ“ä½œçš„ï¼Œç¼“æ…¢çš„JDBCæ“ä½œé€šè¿‡å¸®åŠ©è¿›ç¨‹å®Œæˆã€‚æ‰©å±•è¿™äº›æ“ä½œå¯ä»¥æœ‰æ•ˆçš„æå‡æ€§èƒ½ï¼Œé€šè¿‡å¤šçº¿ç¨‹å®ç°å¤šä¸ªæ“ä½œåŒæ—¶è¢«æ‰§è¡Œã€‚é»˜è®¤ä¸º3ï¼›
preferredTestQueryï¼šå®šä¹‰æ‰€æœ‰è¿æ¥æµ‹è¯•éƒ½æ‰§è¡Œçš„æµ‹è¯•è¯­å¥ã€‚åœ¨ä½¿ç”¨è¿æ¥æµ‹è¯•çš„æƒ…å†µä¸‹è¿™ä¸ªå‚æ•°èƒ½æ˜¾è‘—æé«˜æµ‹è¯•é€Ÿåº¦ã€‚æµ‹è¯•çš„è¡¨å¿…é¡»åœ¨åˆå§‹æ•°æ®æºçš„æ—¶å€™å°±å­˜åœ¨ã€‚é»˜è®¤ä¸ºnullï¼›
propertyCycleï¼š ç”¨æˆ·ä¿®æ”¹ç³»ç»Ÿé…ç½®å‚æ•°æ‰§è¡Œå‰æœ€å¤šç­‰å¾…çš„ç§’æ•°ã€‚é»˜è®¤ä¸º300ï¼›
testConnectionOnCheckoutï¼šå› æ€§èƒ½æ¶ˆè€—å¤§è¯·åªåœ¨éœ€è¦çš„æ—¶å€™ä½¿ç”¨å®ƒã€‚å¦‚æœè®¾ä¸ºtrueé‚£ä¹ˆåœ¨æ¯ä¸ªconnectionæäº¤çš„æ—¶å€™éƒ½ å°†æ ¡éªŒå…¶æœ‰æ•ˆæ€§ã€‚å»ºè®®ä½¿ç”¨idleConnectionTestPeriodæˆ–automaticTestTable
ç­‰æ–¹æ³•æ¥æå‡è¿æ¥æµ‹è¯•çš„æ€§èƒ½ã€‚é»˜è®¤ä¸ºfalseï¼›
testConnectionOnCheckinï¼šå¦‚æœè®¾ä¸ºtrueé‚£ä¹ˆåœ¨å–å¾—è¿æ¥çš„åŒæ—¶å°†æ ¡éªŒè¿æ¥çš„æœ‰æ•ˆæ€§ã€‚é»˜è®¤ä¸ºfalseã€‚</p>
</blockquote>
<p><strong>4.JNDIæ•°æ®æº</strong></p>
<p>å¦‚æœåº”ç”¨é…ç½®åœ¨é«˜æ€§èƒ½çš„åº”ç”¨æœåŠ¡å™¨ï¼ˆå¦‚WebLogicæˆ–Websphere,tomcatç­‰ï¼‰ä¸Šï¼Œæˆ‘ä»¬å¯èƒ½æ›´å¸Œæœ›ä½¿ç”¨åº”ç”¨æœåŠ¡å™¨æœ¬èº«æä¾›çš„æ•°æ®æºã€‚åº”ç”¨æœåŠ¡å™¨çš„æ•°æ®æº ä½¿ç”¨JNDIå¼€æ”¾è°ƒç”¨è€…ä½¿ç”¨ï¼ŒSpringä¸ºæ­¤ä¸“é—¨æä¾›å¼•ç”¨JNDIèµ„æºçš„JndiObjectFactoryBeanç±»ã€‚
xml ä»£ç ï¼š</p>
<pre><code class="language-xml">&lt;bean id=&quot;dataSource&quot; class=&quot;org.springframework.jndi.JndiObjectFactoryBean&quot;&gt;        
        &lt;property name=&quot;jndiName&quot; value=&quot;java:comp/env/jdbc/orclight&quot;/&gt;        
&lt;/bean&gt; 
</code></pre>
<pre><code class="language-xml">&lt;beans xmlns=http://www.springframework.org/schema/beans      
xmlns:xsi=http://www.w3.org/2001/XMLSchema-instance      
xmlns:jee=http://www.springframework.org/schema/jee      
xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans       
http://www.springframework.org/schema/beans/spring-beans-2.0.xsd       
http://www.springframework.org/schema/jee      
http://www.springframework.org/schema/jee/spring-jee-2.0.xsd&quot;&gt;        
    &lt;jee:jndi-lookup id=&quot;dataSource&quot; jndi-name=&quot; java:comp/env/jdbc/orclight&quot;/&gt;        
&lt;/beans&gt; 
</code></pre>
 </p>
                      </div>
                  </div>

                  <div class="row">
                      <div class="col-md-12 animate-box">
                          
                              <div class="next-post">
                                  <div class="next">ä¸‹ä¸€ç¯‡</div>
                                  <a href="https://jike-leisong.github.io//post/æ·±å…¥ç†è§£åˆ†å¸ƒå¼äº‹åŠ¡,é«˜å¹¶å‘ä¸‹åˆ†å¸ƒå¼äº‹åŠ¡çš„è§£å†³æ–¹æ¡ˆ">
                                      <h3 class="post-title">
                                          æ·±å…¥ç†è§£åˆ†å¸ƒå¼äº‹åŠ¡,é«˜å¹¶å‘ä¸‹åˆ†å¸ƒå¼äº‹åŠ¡çš„è§£å†³æ–¹æ¡ˆ
                                      </h3>
                                  </a>
                              </div>
                          
                      </div>
                  </div>

                  <div class="row">
                      <div class="col-md-12 animate-box">
                          
                      </div>
                  </div>
              </div>

          </article>
      </div>
  </div>

    
<footer id="fh5co-footer">
  <p>Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a></p>
</footer>


    
<!-- jQuery -->
<script src="https://jike-leisong.github.io//media/scripts/_vendors/jquery.min.js"></script>
<!-- jQuery Easing -->
<script src="https://jike-leisong.github.io//media/scripts/_vendors/jquery.easing.1.3.js"></script>
<!-- Bootstrap -->
<script src="https://jike-leisong.github.io//media/scripts/_vendors/bootstrap.min.js"></script>
<!-- Waypoints -->
<script src="https://jike-leisong.github.io//media/scripts/_vendors/jquery.waypoints.min.js"></script>
<!-- Main JS -->
<script src="https://jike-leisong.github.io//media/scripts/_vendors/main.js"></script>
<!-- Md5 Min JS -->
<script src="https://jike-leisong.github.io//media/scripts/_vendors/md5.min.js"></script>

<script type="application/javascript">
    hljs.initHighlightingOnLoad();
</script>




  </body>
</html>
