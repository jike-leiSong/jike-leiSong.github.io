<!DOCTYPE html>
<html>
  <head>
      
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>itme.ink</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<meta name="description" content="æ¸©æ•…è€ŒçŸ¥æ–°"/>
<meta name="keywords" content="æ¸©æ•…è€ŒçŸ¥æ–°"/>

<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
<link rel="shortcut icon" href="https://jike-leisong.github.io//favicon.ico">

<link rel="stylesheet" href="https://jike-leisong.github.io//styles/main.css">

<!-- Modernizr JS -->
<script src="https://jike-leisong.github.io//media/scripts/_vendors/modernizr-2.6.2.min.js"></script>
<!-- FOR IE9 below -->
<!--[if lt IE 9]>
<scripts src="https://jike-leisong.github.io//media/scripts/_vendors/respond.min.js"></scripts>
<![endif]-->

<!-- Comment -->


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/tomorrow-night.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
<link crossorigin="anonymous" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" href="https://lib.baomitu.com/font-awesome/5.8.1/css/all.min.css" rel="stylesheet">

  </head>
  <body>
  
<div id="fh5co-offcanvas">
    <a href="#!" class="fh5co-close-offcanvas js-fh5co-close-offcanvas">
        <span><i class="icon-cross3"></i> <span>Close</span></span>
    </a>
    <div class="fh5co-bio">
        <figure>
            <img src="https://jike-leisong.github.io//media/images/avatar.png" alt="itme.ink" class="img-responsive">
        </figure>
        <h3 class="heading">ABOUT ME</h3>
        <h2>itme.ink</h2>
        <p>æ¸©æ•…è€ŒçŸ¥æ–°</p>
        <ul class="fh5co-social">
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
        </ul>
    </div>

    <div class="fh5co-menu">
        <div class="fh5co-box">
            <h3 class="heading">æœç´¢</h3>
            <form action="#">
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="è¾“å…¥å…³é”®å­—">
                </div>
            </form>
        </div>
        <div class="fh5co-box">
            <h3 class="heading">æ ‡ç­¾</h3>
            <ul>
                
                    <li><a href="https://jike-leisong.github.io//tag/2RK0lyPtw">DB</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/hJqNul-if">Spring Cloud</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/mian-shi-ti">é¢è¯•é¢˜</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/yYzItG4Us">è®¾è®¡æ¨¡å¼</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/2VvjfMCS1">æºç åˆ†æ</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/duo-xian-cheng">å¤šçº¿ç¨‹</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/xiao-xi">æ¶ˆæ¯</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/0WBzoU1G-">Mybatis</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/sOMy5ZlVw">åˆ†å¸ƒå¼</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/tool">Tool</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/suan-fa">ç®—æ³•</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/tomact">Tomact</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/linux">Linux</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/MzKEL8HsE">Spring</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/boot">Boot</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/JUSmlN723">Git</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/netty">Netty</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/kua-yu">è·¨åŸŸ</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/xing-neng-diao-you">æ€§èƒ½è°ƒä¼˜</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/java">Java</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/redis">Redis</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/shu-ju-ku">æ•°æ®åº“</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/lei-jia-zai">ç±»åŠ è½½</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/jia-gou">æ¶æ„</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/zookeeper">Zookeeper</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/soa">SOA</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/shu-ju-yuan">æ•°æ®æº</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/fen-bu-shi-shi-wu">åˆ†å¸ƒå¼äº‹åŠ¡</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/sql">SQL</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/mabatis">Mabatis</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/hashmap">HashMap</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/cloud">Cloud</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/huan-cun">ç¼“å­˜</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/session">Session</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/cron">Cron</a></li>
                
                    <li><a href="https://jike-leisong.github.io//tag/mi-deng-xing">å¹‚ç­‰æ€§</a></li>
                
            </ul>
        </div>
    </div>
</div>

<header id="fh5co-header">
    <div class="container-fluid">
        <div class="row">
            <a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle"><i></i></a>
            <ul class="fh5co-social">
                
                    <li>
                        <a href="/"
                         >
                            é¦–é¡µ
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives"
                         >
                            å½’æ¡£
                        </a>
                    </li>
                
                    <li>
                        <a href="/tags"
                         >
                            æ ‡ç­¾
                        </a>
                    </li>
                
                    <li>
                        <a href="/post/about"
                         >
                            å…³äº
                        </a>
                    </li>
                
            </ul>
            <div class="col-lg-12 col-md-12 text-center">
                <h1 id="fh5co-logo">
                    <a href="https://jike-leisong.github.io/">itme.ink</a>
                </h1>
            </div>
        </div>
    </div>
</header>


<!--  <a href="#" class="fh5co-post-prev"><span>ğŸ‘ˆ Prev</span></a>-->
<!--  <a href="#" class="fh5co-post-next"><span>Next ğŸ‘‰</span></a>-->

  <div class="container-fluid">
      <div class="row fh5co-post-entry single-entry">
          <article class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2 col-xs-12 col-xs-offset-0">
              <figure class="animate-box">
                  
              </figure>
              <span class="fh5co-meta animate-box">
                  
                      <div class="tag-container">
                          
                              <a href="https://jike-leisong.github.io//tag/MzKEL8HsE" class="tag">Spring, </a>
                          
                              <a href="https://jike-leisong.github.io//tag/mian-shi-ti" class="tag">é¢è¯•é¢˜, </a>
                          
                      </div>
                  
              </span>
              <h2 class="fh5co-article-title animate-box">Spring AOP è¯¦è§£</h2>
              <span class="fh5co-meta fh5co-date animate-box">2017-12-25</span>

              <div class="col-lg-12 col-lg-offset-0 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0 col-xs-12 col-xs-offset-0 text-left content-article">
                  <div class="row">
                      <div class="col-md-12 animate-box post-content">
                          <p> <p>ä¸€.å‰è¨€</p>
<pre><code>åœ¨ä»¥å‰çš„é¡¹ç›®ä¸­ï¼Œå¾ˆå°‘å»å…³æ³¨spring aopçš„å…·ä½“å®ç°ä¸ç†è®ºï¼Œåªæ˜¯ç®€å•äº†è§£äº†ä¸€ä¸‹ä»€ä¹ˆæ˜¯aopå…·ä½“æ€ä¹ˆç”¨ï¼Œçœ‹åˆ°äº†ä¸€ç¯‡åšæ–‡å†™å¾—è¿˜ä¸é”™ï¼Œå°±è½¬è½½æ¥å­¦ä¹ ä¸€ä¸‹ï¼Œåšæ–‡åœ°å€ï¼šhttp://www.cnblogs.com/xrq730/p/4919025.html
</code></pre>
<p><strong>AOP</strong></p>
<blockquote>
<p>AOPï¼ˆAspect Oriented Programmingï¼‰ï¼Œå³é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œå¯ä»¥è¯´æ˜¯OOPï¼ˆObject Oriented Programmingï¼Œé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼‰çš„è¡¥å……å’Œå®Œå–„ã€‚OOPå¼•å…¥å°è£…ã€ç»§æ‰¿ã€å¤šæ€ç­‰æ¦‚å¿µæ¥å»ºç«‹ä¸€ç§å¯¹è±¡å±‚æ¬¡ç»“æ„ï¼Œç”¨äºæ¨¡æ‹Ÿå…¬å…±è¡Œä¸ºçš„ä¸€ä¸ªé›†åˆã€‚ä¸è¿‡OOPå…è®¸å¼€å‘è€…å®šä¹‰çºµå‘çš„å…³ç³»ï¼Œä½†å¹¶ä¸é€‚åˆå®šä¹‰æ¨ªå‘çš„å…³ç³»ï¼Œä¾‹å¦‚æ—¥å¿—åŠŸèƒ½ã€‚æ—¥å¿—ä»£ç å¾€å¾€æ¨ªå‘åœ°æ•£å¸ƒåœ¨æ‰€æœ‰å¯¹è±¡å±‚æ¬¡ä¸­ï¼Œè€Œä¸å®ƒå¯¹åº”çš„å¯¹è±¡çš„æ ¸å¿ƒåŠŸèƒ½æ¯«æ— å…³ç³»å¯¹äºå…¶ä»–ç±»å‹çš„ä»£ç ï¼Œå¦‚å®‰å…¨æ€§ã€å¼‚å¸¸å¤„ç†å’Œé€æ˜çš„æŒç»­æ€§ä¹Ÿéƒ½æ˜¯å¦‚æ­¤ï¼Œè¿™ç§æ•£å¸ƒåœ¨å„å¤„çš„æ— å…³çš„ä»£ç è¢«ç§°ä¸ºæ¨ªåˆ‡ï¼ˆcross cuttingï¼‰ï¼Œåœ¨OOPè®¾è®¡ä¸­ï¼Œå®ƒå¯¼è‡´äº†å¤§é‡ä»£ç çš„é‡å¤ï¼Œè€Œä¸åˆ©äºå„ä¸ªæ¨¡å—çš„é‡ç”¨ã€‚</p>
</blockquote>
<p>AOPæŠ€æœ¯æ°æ°ç›¸åï¼Œå®ƒåˆ©ç”¨ä¸€ç§ç§°ä¸º&quot;æ¨ªåˆ‡&quot;çš„æŠ€æœ¯ï¼Œå‰–è§£å¼€å°è£…çš„å¯¹è±¡å†…éƒ¨ï¼Œå¹¶å°†é‚£äº›å½±å“äº†å¤šä¸ªç±»çš„å…¬å…±è¡Œä¸ºå°è£…åˆ°ä¸€ä¸ªå¯é‡ç”¨æ¨¡å—ï¼Œå¹¶å°†å…¶å‘½åä¸º&quot;Aspect&quot;ï¼Œå³åˆ‡é¢ã€‚æ‰€è°“&quot;åˆ‡é¢&quot;ï¼Œç®€å•è¯´å°±æ˜¯é‚£äº›ä¸ä¸šåŠ¡æ— å…³ï¼Œå´ä¸ºä¸šåŠ¡æ¨¡å—æ‰€å…±åŒè°ƒç”¨çš„é€»è¾‘æˆ–è´£ä»»å°è£…èµ·æ¥ï¼Œä¾¿äºå‡å°‘ç³»ç»Ÿçš„é‡å¤ä»£ç ï¼Œé™ä½æ¨¡å—ä¹‹é—´çš„è€¦åˆåº¦ï¼Œå¹¶æœ‰åˆ©äºæœªæ¥çš„å¯æ“ä½œæ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<p>ä½¿ç”¨&quot;æ¨ªåˆ‡&quot;æŠ€æœ¯ï¼ŒAOPæŠŠè½¯ä»¶ç³»ç»Ÿåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š<font color="red">æ ¸å¿ƒå…³æ³¨ç‚¹</font>å’Œ<font color="red">æ¨ªåˆ‡å…³æ³¨ç‚¹</font>ã€‚ä¸šåŠ¡å¤„ç†çš„ä¸»è¦æµç¨‹æ˜¯æ ¸å¿ƒå…³æ³¨ç‚¹ï¼Œä¸ä¹‹å…³ç³»ä¸å¤§çš„éƒ¨åˆ†æ˜¯æ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚æ¨ªåˆ‡å…³æ³¨ç‚¹çš„ä¸€ä¸ªç‰¹ç‚¹æ˜¯ï¼Œä»–ä»¬ç»å¸¸å‘ç”Ÿåœ¨æ ¸å¿ƒå…³æ³¨ç‚¹çš„å¤šå¤„ï¼Œè€Œå„å¤„åŸºæœ¬ç›¸ä¼¼ï¼Œæ¯”å¦‚<font color="red">æƒé™è®¤è¯ã€æ—¥å¿—ã€äº‹ç‰©</font>ã€‚AOPçš„ä½œç”¨åœ¨äºåˆ†ç¦»ç³»ç»Ÿä¸­çš„å„ç§å…³æ³¨ç‚¹ï¼Œå°†æ ¸å¿ƒå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨ç‚¹åˆ†ç¦»å¼€æ¥ã€‚</p>
<p><strong>AOPæ ¸å¿ƒæ¦‚å¿µ</strong></p>
<p>1ã€æ¨ªåˆ‡å…³æ³¨ç‚¹</p>
<blockquote>
<p>å¯¹å“ªäº›æ–¹æ³•è¿›è¡Œæ‹¦æˆªï¼Œæ‹¦æˆªåæ€ä¹ˆå¤„ç†ï¼Œè¿™äº›å…³æ³¨ç‚¹ç§°ä¹‹ä¸ºæ¨ªåˆ‡å…³æ³¨ç‚¹</p>
</blockquote>
<p>2ã€åˆ‡é¢ï¼ˆaspectï¼‰</p>
<blockquote>
<p>ç±»æ˜¯å¯¹ç‰©ä½“ç‰¹å¾çš„æŠ½è±¡ï¼Œåˆ‡é¢å°±æ˜¯å¯¹æ¨ªåˆ‡å…³æ³¨ç‚¹çš„æŠ½è±¡</p>
</blockquote>
<p>3ã€è¿æ¥ç‚¹ï¼ˆjoinpointï¼‰</p>
<blockquote>
<p>è¢«æ‹¦æˆªåˆ°çš„ç‚¹ï¼Œå› ä¸ºSpringåªæ”¯æŒæ–¹æ³•ç±»å‹çš„è¿æ¥ç‚¹ï¼Œæ‰€ä»¥åœ¨Springä¸­è¿æ¥ç‚¹æŒ‡çš„å°±æ˜¯è¢«æ‹¦æˆªåˆ°çš„æ–¹æ³•ï¼Œå®é™…ä¸Šè¿æ¥ç‚¹è¿˜å¯ä»¥æ˜¯å­—æ®µæˆ–è€…æ„é€ å™¨</p>
</blockquote>
<p>4ã€åˆ‡å…¥ç‚¹ï¼ˆpointcutï¼‰</p>
<blockquote>
<p>å¯¹è¿æ¥ç‚¹è¿›è¡Œæ‹¦æˆªçš„å®šä¹‰</p>
</blockquote>
<p>5ã€é€šçŸ¥ï¼ˆadviceï¼‰</p>
<blockquote>
<p>æ‰€è°“é€šçŸ¥æŒ‡çš„å°±æ˜¯æŒ‡æ‹¦æˆªåˆ°è¿æ¥ç‚¹ä¹‹åè¦æ‰§è¡Œçš„ä»£ç ï¼Œé€šçŸ¥åˆ†ä¸ºå‰ç½®ã€åç½®ã€å¼‚å¸¸ã€æœ€ç»ˆã€ç¯ç»•é€šçŸ¥äº”ç±»</p>
</blockquote>
<p>6ã€ç›®æ ‡å¯¹è±¡</p>
<blockquote>
<p>ä»£ç†çš„ç›®æ ‡å¯¹è±¡</p>
</blockquote>
<p>7ã€ç»‡å…¥ï¼ˆweaveï¼‰</p>
<blockquote>
<p>å°†åˆ‡é¢åº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡å¹¶å¯¼è‡´ä»£ç†å¯¹è±¡åˆ›å»ºçš„è¿‡ç¨‹</p>
</blockquote>
<p>8ã€å¼•å…¥ï¼ˆintroductionï¼‰</p>
<blockquote>
<p>åœ¨ä¸ä¿®æ”¹ä»£ç çš„å‰æä¸‹ï¼Œå¼•å…¥å¯ä»¥åœ¨è¿è¡ŒæœŸä¸ºç±»åŠ¨æ€åœ°æ·»åŠ ä¸€äº›æ–¹æ³•æˆ–å­—æ®µ</p>
</blockquote>
<p>Springå¯¹AOPçš„æ”¯æŒ</p>
<p><font color="red">Springä¸­AOPä»£ç†ç”±Springçš„IOCå®¹å™¨è´Ÿè´£ç”Ÿæˆã€ç®¡ç†ï¼Œå…¶ä¾èµ–å…³ç³»ä¹Ÿç”±IOCå®¹å™¨è´Ÿè´£ç®¡ç†ã€‚</font>å› æ­¤ï¼ŒAOPä»£ç†å¯ä»¥ç›´æ¥ä½¿ç”¨å®¹å™¨ä¸­çš„å…¶å®ƒbeanå®ä¾‹ä½œä¸ºç›®æ ‡ï¼Œè¿™ç§å…³ç³»å¯ç”±IOCå®¹å™¨çš„ä¾èµ–æ³¨å…¥æä¾›ã€‚Springåˆ›å»ºä»£ç†çš„è§„åˆ™ä¸ºï¼š</p>
<blockquote>
<p>1ã€<font color="red">é»˜è®¤ä½¿ç”¨JavaåŠ¨æ€ä»£ç†æ¥åˆ›å»ºAOPä»£ç†</font>ï¼Œè¿™æ ·å°±å¯ä»¥ä¸ºä»»ä½•æ¥å£å®ä¾‹åˆ›å»ºä»£ç†äº†</p>
</blockquote>
<blockquote>
<p>2ã€<font color="red">å½“éœ€è¦ä»£ç†çš„ç±»ä¸æ˜¯ä»£ç†æ¥å£çš„æ—¶å€™ï¼ŒSpringä¼šåˆ‡æ¢ä¸ºä½¿ç”¨CGLIBä»£ç†</font>ï¼Œä¹Ÿå¯å¼ºåˆ¶ä½¿ç”¨CGLIB</p>
</blockquote>
<p><strong>AOPç¼–ç¨‹å…¶å®æ˜¯å¾ˆç®€å•çš„äº‹æƒ…ï¼Œçºµè§‚AOPç¼–ç¨‹ï¼Œç¨‹åºå‘˜åªéœ€è¦å‚ä¸ä¸‰ä¸ªéƒ¨åˆ†ï¼š</strong></p>
<blockquote>
<p>1ã€å®šä¹‰æ™®é€šä¸šåŠ¡ç»„ä»¶</p>
</blockquote>
<blockquote>
<p>2ã€å®šä¹‰åˆ‡å…¥ç‚¹ï¼Œä¸€ä¸ªåˆ‡å…¥ç‚¹å¯èƒ½æ¨ªåˆ‡å¤šä¸ªä¸šåŠ¡ç»„ä»¶</p>
</blockquote>
<blockquote>
<p>3ã€å®šä¹‰å¢å¼ºå¤„ç†ï¼Œå¢å¼ºå¤„ç†å°±æ˜¯åœ¨AOPæ¡†æ¶ä¸ºæ™®é€šä¸šåŠ¡ç»„ä»¶ç»‡å…¥çš„å¤„ç†åŠ¨ä½œ</p>
</blockquote>
<p>æ‰€ä»¥è¿›è¡ŒAOPç¼–ç¨‹çš„å…³é”®å°±æ˜¯å®šä¹‰åˆ‡å…¥ç‚¹å’Œå®šä¹‰å¢å¼ºå¤„ç†ï¼Œä¸€æ—¦å®šä¹‰äº†åˆé€‚çš„åˆ‡å…¥ç‚¹å’Œå¢å¼ºå¤„ç†ï¼ŒAOPæ¡†æ¶å°†è‡ªåŠ¨ç”ŸæˆAOPä»£ç†ï¼Œå³ï¼š<font color="red">ä»£ç†å¯¹è±¡çš„æ–¹æ³•=å¢å¼ºå¤„ç†+è¢«ä»£ç†å¯¹è±¡</font>çš„æ–¹æ³•ã€‚</p>
<p>ä¸‹é¢ç»™å‡ºä¸€ä¸ªSpring AOPçš„.xmlæ–‡ä»¶æ¨¡æ¿ï¼Œåå­—å«åšaop.xmlï¼Œä¹‹åçš„å†…å®¹éƒ½åœ¨aop.xmlä¸Šè¿›è¡Œæ‰©å±•ï¼š</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
    xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;
    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-4.2.xsd
        http://www.springframework.org/schema/aop
        http://www.springframework.org/schema/aop/spring-aop-4.2.xsd&quot;&gt;
            
&lt;/beans&gt;
</code></pre>
<p><strong>åŸºäºSpringçš„AOPç®€å•å®ç°</strong></p>
<p>æ³¨æ„ä¸€ä¸‹ï¼Œåœ¨è®²è§£ä¹‹å‰ï¼Œè¯´æ˜ä¸€ç‚¹ï¼šä½¿ç”¨Spring AOPï¼Œè¦æˆåŠŸè¿è¡Œèµ·ä»£ç ï¼Œåªç”¨Springæä¾›ç»™å¼€å‘è€…çš„jaråŒ…æ˜¯ä¸å¤Ÿçš„ï¼Œè¯·é¢å¤–ä¸Šç½‘ä¸‹è½½ä¸¤ä¸ªjaråŒ…ï¼š</p>
<p>1ã€aopalliance.jar</p>
<p>2ã€aspectjweaver.jar</p>
<p>å¼€å§‹è®²è§£ç”¨Spring AOPçš„XMLå®ç°æ–¹å¼ï¼Œå…ˆå®šä¹‰ä¸€ä¸ªæ¥å£ï¼š</p>
<pre><code class="language-java">public interface HelloWorld
{
    void printHelloWorld();
    void doPrint();
}
</code></pre>
<p>å®šä¹‰ä¸¤ä¸ªæ¥å£å®ç°ç±»ï¼š</p>
<pre><code class="language-java">public class HelloWorldImpl1 implements HelloWorld
{
    public void printHelloWorld()
    {
        System.out.println(&quot;Enter HelloWorldImpl1.printHelloWorld()&quot;);
    }
    
    public void doPrint()
    {
        System.out.println(&quot;Enter HelloWorldImpl1.doPrint()&quot;);
        return ;
    }
}
</code></pre>
<pre><code class="language-java">public class HelloWorldImpl2 implements HelloWorld
{
    public void printHelloWorld()
    {
        System.out.println(&quot;Enter HelloWorldImpl2.printHelloWorld()&quot;);
    }
    
    public void doPrint()
    {
        System.out.println(&quot;Enter HelloWorldImpl2.doPrint()&quot;);
        return ;
    }
}
</code></pre>
<p>æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼Œè¿™é‡Œæ˜¯æ‰“å°æ—¶é—´ï¼š</p>
<pre><code class="language-java">public class TimeHandler
{
    public void printTime()
    {
        System.out.println(&quot;CurrentTime = &quot; + System.currentTimeMillis());
    }
}
</code></pre>
<p>æœ‰è¿™ä¸‰ä¸ªç±»å°±å¯ä»¥å®ç°ä¸€ä¸ªç®€å•çš„Spring AOPäº†ï¼Œçœ‹ä¸€ä¸‹aop.xmlçš„é…ç½®ï¼š</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
    xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;
    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-4.2.xsd
        http://www.springframework.org/schema/aop
        http://www.springframework.org/schema/aop/spring-aop-4.2.xsd&quot;&gt;
        
        &lt;bean id=&quot;helloWorldImpl1&quot; class=&quot;com.xrq.aop.HelloWorldImpl1&quot; /&gt;
        &lt;bean id=&quot;helloWorldImpl2&quot; class=&quot;com.xrq.aop.HelloWorldImpl2&quot; /&gt;
        &lt;bean id=&quot;timeHandler&quot; class=&quot;com.xrq.aop.TimeHandler&quot; /&gt;
        
        &lt;aop:config&gt;
            &lt;aop:aspect id=&quot;time&quot; ref=&quot;timeHandler&quot;&gt;
                &lt;aop:pointcut id=&quot;addAllMethod&quot; expression=&quot;execution(* com.xrq.aop.HelloWorld.*(..))&quot; /&gt;
                &lt;aop:before method=&quot;printTime&quot; pointcut-ref=&quot;addAllMethod&quot; /&gt;
                &lt;aop:after method=&quot;printTime&quot; pointcut-ref=&quot;addAllMethod&quot; /&gt;
            &lt;/aop:aspect&gt;
        &lt;/aop:config&gt;
&lt;/beans&gt;
</code></pre>
<p>å†™ä¸€ä¸ªmainå‡½æ•°è°ƒç”¨ä¸€ä¸‹ï¼š</p>
<pre><code class="language-java">public static void main(String[] args)
{
    ApplicationContext ctx = 
            new ClassPathXmlApplicationContext(&quot;aop.xml&quot;);
        
    HelloWorld hw1 = (HelloWorld)ctx.getBean(&quot;helloWorldImpl1&quot;);
    HelloWorld hw2 = (HelloWorld)ctx.getBean(&quot;helloWorldImpl2&quot;);
    hw1.printHelloWorld();
    System.out.println();
    hw1.doPrint();
    
    System.out.println();
    hw2.printHelloWorld();
    System.out.println();
    hw2.doPrint();
}
</code></pre>
<p>è¿è¡Œç»“æœä¸ºï¼š</p>
<pre><code>CurrentTime = 1446129611993
Enter HelloWorldImpl1.printHelloWorld()
CurrentTime = 1446129611993

CurrentTime = 1446129611994
Enter HelloWorldImpl1.doPrint()
CurrentTime = 1446129611994

CurrentTime = 1446129611994
Enter HelloWorldImpl2.printHelloWorld()
CurrentTime = 1446129611994

CurrentTime = 1446129611994
Enter HelloWorldImpl2.doPrint()
CurrentTime = 1446129611994
</code></pre>
<p>çœ‹åˆ°ç»™HelloWorldæ¥å£çš„ä¸¤ä¸ªå®ç°ç±»çš„æ‰€æœ‰æ–¹æ³•éƒ½åŠ ä¸Šäº†ä»£ç†ï¼Œä»£ç†å†…å®¹å°±æ˜¯æ‰“å°æ—¶é—´</p>
<p><strong>åŸºäºSpringçš„AOPä½¿ç”¨å…¶ä»–ç»†èŠ‚</strong></p>
<p>1ã€å¢åŠ ä¸€ä¸ªæ¨ªåˆ‡å…³æ³¨ç‚¹ï¼Œæ‰“å°æ—¥å¿—ï¼ŒJavaç±»ä¸ºï¼š</p>
<pre><code class="language-java">public class LogHandler
{
    public void LogBefore()
    {
        System.out.println(&quot;Log before method&quot;);
    }
    
    public void LogAfter()
    {
        System.out.println(&quot;Log after method&quot;);
    }
}
</code></pre>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
    xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;
    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-4.2.xsd
        http://www.springframework.org/schema/aop
        http://www.springframework.org/schema/aop/spring-aop-4.2.xsd&quot;&gt;
        
        &lt;bean id=&quot;helloWorldImpl1&quot; class=&quot;com.xrq.aop.HelloWorldImpl1&quot; /&gt;
        &lt;bean id=&quot;helloWorldImpl2&quot; class=&quot;com.xrq.aop.HelloWorldImpl2&quot; /&gt;
        &lt;bean id=&quot;timeHandler&quot; class=&quot;com.xrq.aop.TimeHandler&quot; /&gt;
        &lt;bean id=&quot;logHandler&quot; class=&quot;com.xrq.aop.LogHandler&quot; /&gt;
        
        &lt;aop:config&gt;
            &lt;aop:aspect id=&quot;time&quot; ref=&quot;timeHandler&quot; order=&quot;1&quot;&gt;
                &lt;aop:pointcut id=&quot;addTime&quot; expression=&quot;execution(* com.xrq.aop.HelloWorld.*(..))&quot; /&gt;
                &lt;aop:before method=&quot;printTime&quot; pointcut-ref=&quot;addTime&quot; /&gt;
                &lt;aop:after method=&quot;printTime&quot; pointcut-ref=&quot;addTime&quot; /&gt;
            &lt;/aop:aspect&gt;
            &lt;aop:aspect id=&quot;log&quot; ref=&quot;logHandler&quot; order=&quot;2&quot;&gt;
                &lt;aop:pointcut id=&quot;printLog&quot; expression=&quot;execution(* com.xrq.aop.HelloWorld.*(..))&quot; /&gt;
                &lt;aop:before method=&quot;LogBefore&quot; pointcut-ref=&quot;printLog&quot; /&gt;
                &lt;aop:after method=&quot;LogAfter&quot; pointcut-ref=&quot;printLog&quot; /&gt;
            &lt;/aop:aspect&gt;
        &lt;/aop:config&gt;
&lt;/beans&gt;
</code></pre>
<p>æµ‹è¯•ç±»ä¸å˜ï¼Œæ‰“å°ç»“æœä¸ºï¼š</p>
<pre><code>CurrentTime = 1446130273734
Log before method
Enter HelloWorldImpl1.printHelloWorld()
Log after method
CurrentTime = 1446130273735

CurrentTime = 1446130273736
Log before method
Enter HelloWorldImpl1.doPrint()
Log after method
CurrentTime = 1446130273736

CurrentTime = 1446130273736
Log before method
Enter HelloWorldImpl2.printHelloWorld()
Log after method
CurrentTime = 1446130273736

CurrentTime = 1446130273737
Log before method
Enter HelloWorldImpl2.doPrint()
Log after method
CurrentTime = 1446130273737
</code></pre>
<p>è¦æƒ³è®©logHandleråœ¨timeHandlerå‰ä½¿ç”¨æœ‰ä¸¤ä¸ªåŠæ³•ï¼š</p>
<blockquote>
<p>ï¼ˆ1ï¼‰aspecté‡Œé¢æœ‰ä¸€ä¸ªorderå±æ€§ï¼Œorderå±æ€§çš„æ•°å­—å°±æ˜¯æ¨ªåˆ‡å…³æ³¨ç‚¹çš„é¡ºåº</p>
</blockquote>
<blockquote>
<p>ï¼ˆ2ï¼‰æŠŠlogHandlerå®šä¹‰åœ¨timeHandlerå‰é¢ï¼ŒSpringé»˜è®¤ä»¥aspectçš„å®šä¹‰é¡ºåºä½œä¸ºç»‡å…¥é¡ºåº</p>
</blockquote>
<p>2ã€æˆ‘åªæƒ³ç»‡å…¥æ¥å£ä¸­çš„æŸäº›æ–¹æ³•</p>
<p>ä¿®æ”¹ä¸€ä¸‹pointcutçš„expressionå°±å¥½äº†ï¼š</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;
    xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;
    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-4.2.xsd
        http://www.springframework.org/schema/aop
        http://www.springframework.org/schema/aop/spring-aop-4.2.xsd&quot;&gt;
        
        &lt;bean id=&quot;helloWorldImpl1&quot; class=&quot;com.xrq.aop.HelloWorldImpl1&quot; /&gt;
        &lt;bean id=&quot;helloWorldImpl2&quot; class=&quot;com.xrq.aop.HelloWorldImpl2&quot; /&gt;
        &lt;bean id=&quot;timeHandler&quot; class=&quot;com.xrq.aop.TimeHandler&quot; /&gt;
        &lt;bean id=&quot;logHandler&quot; class=&quot;com.xrq.aop.LogHandler&quot; /&gt;
        
        &lt;aop:config&gt;
            &lt;aop:aspect id=&quot;time&quot; ref=&quot;timeHandler&quot; order=&quot;1&quot;&gt;
                &lt;aop:pointcut id=&quot;addTime&quot; expression=&quot;execution(* com.xrq.aop.HelloWorld.print*(..))&quot; /&gt;
                &lt;aop:before method=&quot;printTime&quot; pointcut-ref=&quot;addTime&quot; /&gt;
                &lt;aop:after method=&quot;printTime&quot; pointcut-ref=&quot;addTime&quot; /&gt;
            &lt;/aop:aspect&gt;
            &lt;aop:aspect id=&quot;log&quot; ref=&quot;logHandler&quot; order=&quot;2&quot;&gt;
                &lt;aop:pointcut id=&quot;printLog&quot; expression=&quot;execution(* com.xrq.aop.HelloWorld.do*(..))&quot; /&gt;
                &lt;aop:before method=&quot;LogBefore&quot; pointcut-ref=&quot;printLog&quot; /&gt;
                &lt;aop:after method=&quot;LogAfter&quot; pointcut-ref=&quot;printLog&quot; /&gt;
            &lt;/aop:aspect&gt;
        &lt;/aop:config&gt;
&lt;/beans&gt;
</code></pre>
<p>è¡¨ç¤ºtimeHandleråªä¼šç»‡å…¥HelloWorldæ¥å£printå¼€å¤´çš„æ–¹æ³•ï¼ŒlogHandleråªä¼šç»‡å…¥HelloWorldæ¥å£doå¼€å¤´çš„æ–¹æ³•</p>
<p><strong>3ã€å¼ºåˆ¶ä½¿ç”¨CGLIBç”Ÿæˆä»£ç†</strong></p>
<p>å‰é¢è¯´è¿‡Springä½¿ç”¨åŠ¨æ€ä»£ç†æˆ–æ˜¯CGLIBç”Ÿæˆä»£ç†æ˜¯æœ‰è§„åˆ™çš„ï¼Œé«˜ç‰ˆæœ¬çš„Springä¼šè‡ªåŠ¨é€‰æ‹©æ˜¯ä½¿ç”¨åŠ¨æ€ä»£ç†è¿˜æ˜¯CGLIBç”Ÿæˆä»£ç†å†…å®¹ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å¼ºåˆ¶ä½¿ç”¨CGLIBç”Ÿæˆä»£ç†ï¼Œé‚£å°±æ˜¯<a href="aop:config">aop:config</a>é‡Œé¢æœ‰ä¸€ä¸ª&quot;proxy-target-class&quot;å±æ€§ï¼Œè¿™ä¸ªå±æ€§å€¼å¦‚æœè¢«è®¾ç½®ä¸ºtrueï¼Œé‚£ä¹ˆåŸºäºç±»çš„ä»£ç†å°†èµ·ä½œç”¨ï¼Œå¦‚æœproxy-target-classè¢«è®¾ç½®ä¸ºfalseæˆ–è€…è¿™ä¸ªå±æ€§è¢«çœç•¥ï¼Œé‚£ä¹ˆåŸºäºæ¥å£çš„ä»£ç†å°†èµ·ä½œç”¨</p>
 </p>
                      </div>
                  </div>

                  <div class="row">
                      <div class="col-md-12 animate-box">
                          
                              <div class="next-post">
                                  <div class="next">ä¸‹ä¸€ç¯‡</div>
                                  <a href="https://jike-leisong.github.io//post/çº¿ç¨‹çš„åŒæ­¥ä¸é”">
                                      <h3 class="post-title">
                                          çº¿ç¨‹çš„åŒæ­¥ä¸é”
                                      </h3>
                                  </a>
                              </div>
                          
                      </div>
                  </div>

                  <div class="row">
                      <div class="col-md-12 animate-box">
                          
                      </div>
                  </div>
              </div>

          </article>
      </div>
  </div>

    
<footer id="fh5co-footer">
  <p>Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a></p>
</footer>


    
<!-- jQuery -->
<script src="https://jike-leisong.github.io//media/scripts/_vendors/jquery.min.js"></script>
<!-- jQuery Easing -->
<script src="https://jike-leisong.github.io//media/scripts/_vendors/jquery.easing.1.3.js"></script>
<!-- Bootstrap -->
<script src="https://jike-leisong.github.io//media/scripts/_vendors/bootstrap.min.js"></script>
<!-- Waypoints -->
<script src="https://jike-leisong.github.io//media/scripts/_vendors/jquery.waypoints.min.js"></script>
<!-- Main JS -->
<script src="https://jike-leisong.github.io//media/scripts/_vendors/main.js"></script>
<!-- Md5 Min JS -->
<script src="https://jike-leisong.github.io//media/scripts/_vendors/md5.min.js"></script>

<script type="application/javascript">
    hljs.initHighlightingOnLoad();
</script>




  </body>
</html>
